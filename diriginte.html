<!DOCTYPE html>
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diriginte - Motivări Școlare</title>
    <link rel="stylesheet" href="css/diriginte.css" />
    <link rel="icon" type="image/png" href="/favicon.png" />
  </head>
  <body>
    <!-- Top Header -->
    <header class="top-header">
      <div class="user-info">
        <div class="avatar">
          <span id="user-avatar">👩‍🏫</span>
        </div>
        <div class="user-details">
          <h2 id="user-name">Nume Diriginte</h2>
          <p id="user-class">Diriginte • Clasa 10A</p>
        </div>
      </div>
      <button class="logout-btn" onclick="auth.logout()">Ieșire</button>
    </header>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Pagina 1: Dashboard -->
      <section class="page-content active" id="page-dashboard">
        <div class="page-header">
          <h2>📊 Dashboard</h2>
          <button class="refresh-btn" onclick="diriginte.refreshAll()">🔄</button>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card pending">
            <div class="stat-icon">⏳</div>
            <div class="stat-info">
              <h3 id="total-pending">0</h3>
              <p>În așteptare</p>
            </div>
          </div>

          <div class="stat-card approved">
            <div class="stat-icon">✅</div>
            <div class="stat-info">
              <h3 id="total-approved">0</h3>
              <p>Aprobate</p>
            </div>
          </div>

          <div class="stat-card rejected">
            <div class="stat-icon">❌</div>
            <div class="stat-info">
              <h3 id="total-rejected">0</h3>
              <p>Respinse</p>
            </div>
          </div>

          <div class="stat-card finalized">
            <div class="stat-icon">📋</div>
            <div class="stat-info">
              <h3 id="total-finalized">0</h3>
              <p>Motivate</p>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
          <h3>Acțiuni Rapide</h3>
          <div class="action-buttons">
            <button class="action-btn" onclick="diriginte.switchPage('pending')">
              <span class="btn-icon">⏳</span>
              <span>Procesează solicitări</span>
              <span class="badge" id="pending-badge">0</span>
            </button>

            <button class="action-btn" onclick="diriginte.switchPage('approved')">
              <span class="btn-icon">📤</span>
              <span>Finalizează aprobate</span>
            </button>

            <button class="action-btn" onclick="diriginte.switchPage('statistici-elevi')">
              <span class="btn-icon">👥</span>
              <span>Statistici pe elev</span>
            </button>
          </div>
        </div>
      </section>

      <!-- Pagina 2: În așteptare -->
      <section class="page-content" id="page-pending">
        <div class="page-header">
          <h2>⏳ În Așteptare</h2>
          <span class="count-badge" id="pending-count">0</span>
        </div>

        <div class="solicitari-feed" id="pending-feed">
          <div class="empty-state" id="pending-empty">
            <div class="empty-icon">✅</div>
            <p>Nu sunt solicitări în așteptare</p>
          </div>
        </div>
      </section>

      <!-- Pagina 3: Aprobate -->
      <section class="page-content" id="page-approved">
        <div class="page-header">
          <h2>✅ Aprobate</h2>
          <div class="page-actions">
            <button class="export-btn" onclick="diriginte.exportMotivari()">
              📤 Export Script
            </button>
            <button class="finalize-btn" onclick="diriginte.finalizeSelected()">
              📋 Marchează ca Motivate
            </button>
          </div>
        </div>

        <div class="select-all-section">
          <label class="checkbox-label">
            <input
              type="checkbox"
              id="select-all-approved"
              onchange="diriginte.toggleSelectAll()"
            />
            <span>Selectează toate</span>
          </label>
        </div>

        <div class="solicitari-feed" id="approved-feed">
          <div class="empty-state" id="approved-empty">
            <div class="empty-icon">📄</div>
            <p>Nu sunt solicitări aprobate</p>
          </div>
        </div>
      </section>

      <!-- Pagina 4: Respinse -->
      <section class="page-content" id="page-rejected">
        <div class="page-header">
          <h2>❌ Respinse</h2>
          <button class="refresh-btn" onclick="diriginte.loadRejectedSolicitari()">🔄</button>
        </div>

        <div class="solicitari-feed" id="rejected-feed">
          <div class="empty-state" id="rejected-empty">
            <div class="empty-icon">❌</div>
            <p>Nu sunt solicitări respinse</p>
          </div>
        </div>
      </section>

      <!-- Pagina 5: Toate -->
      <section class="page-content" id="page-all">
        <div class="page-header">
          <h2>📄 Toate Solicitările</h2>
          <button class="refresh-btn" onclick="diriginte.loadAllSolicitari()">🔄</button>
        </div>

        <!-- Filtre Tipuri -->
        <div class="type-filters">
          <h4>Filtrează după tip:</h4>
          <div class="type-filter-buttons">
            <button class="type-filter-btn active" data-type="toate">Toate</button>
            <button class="type-filter-btn" data-type="medicala_clasica">🏥 Medicale</button>
            <button class="type-filter-btn" data-type="invoire_lunga">📅 Cereri învoire</button>
            <button class="type-filter-btn" data-type="alte_motive">📋 Alte motive</button>
            <button class="type-filter-btn" data-type="personal">👤 Problemă personală</button>
            <button class="type-filter-btn" data-type="invoire_justificata">
              🚨 Învoire justificată
            </button>
          </div>
        </div>

        <div class="solicitari-feed" id="all-feed">
          <div class="empty-state" id="all-empty">
            <div class="empty-icon">📝</div>
            <p>Nu sunt solicitări</p>
          </div>
        </div>
      </section>

      <!-- Pagina 6: Statistici Elevi -->
      <section class="page-content" id="page-statistici-elevi">
        <div class="page-header">
          <h2>👥 Statistici pe Elev</h2>
          <button class="refresh-btn" onclick="diriginte.loadStatisticiElevi()">🔄</button>
        </div>

        <div class="elevi-list" id="elevi-list">
          <div class="empty-state">
            <div class="empty-icon">👥</div>
            <p>Se încarcă elevii...</p>
          </div>
        </div>
      </section>

      <!-- Pagina 7: Detalii Elev -->
      <section class="page-content" id="page-detalii-elev">
        <div class="page-header">
          <button class="back-btn" onclick="diriginte.switchPage('statistici-elevi')">
            ← Înapoi
          </button>
          <h2 id="detalii-elev-title">Detalii Elev</h2>
        </div>

        <!-- Stats elev -->
        <div class="elev-stats-grid">
          <div class="stat-card primary">
            <div class="stat-icon">⏰</div>
            <div class="stat-info">
              <h3 id="elev-ore-ramase">0</h3>
              <p>Ore personale rămase</p>
            </div>
          </div>

          <div class="stat-card success">
            <div class="stat-icon">✅</div>
            <div class="stat-info">
              <h3 id="elev-motivate">0</h3>
              <p>Absențe motivate</p>
            </div>
          </div>

          <div class="stat-card warning">
            <div class="stat-icon">📄</div>
            <div class="stat-info">
              <h3 id="elev-total">0</h3>
              <p>Total solicitări</p>
            </div>
          </div>
        </div>

        <!-- Lista solicitări elev -->
        <div class="solicitari-feed" id="detalii-elev-feed">
          <div class="empty-state">
            <div class="empty-icon">📝</div>
            <p>Nu sunt solicitări</p>
          </div>
        </div>
      </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item active" data-page="dashboard">
        <span class="nav-icon">📊</span>
        <span class="nav-label">Dashboard</span>
      </button>

      <button class="nav-item" data-page="pending">
        <span class="nav-icon">⏳</span>
        <span class="nav-label">În așteptare</span>
        <span class="nav-badge" id="nav-pending-badge">0</span>
      </button>

      <button class="nav-item" data-page="approved">
        <span class="nav-icon">✅</span>
        <span class="nav-label">Aprobate</span>
      </button>

      <button class="nav-item" data-page="rejected">
        <span class="nav-icon">❌</span>
        <span class="nav-label">Respinse</span>
      </button>

      <button class="nav-item" data-page="all">
        <span class="nav-icon">📄</span>
        <span class="nav-label">Toate</span>
      </button>

      <button class="nav-item" data-page="statistici-elevi">
        <span class="nav-icon">👥</span>
        <span class="nav-label">Statistici</span>
      </button>
    </nav>

    <!-- Modal pentru vizualizare solicitare -->
    <div class="modal-overlay" id="solicitare-modal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modal-title">Detalii Solicitare</h3>
          <button class="close-btn" onclick="diriginte.closeModal()">×</button>
        </div>

        <div class="modal-body" id="modal-body">
          <!-- Conținut dinamic -->
        </div>

        <div class="modal-actions" id="modal-actions">
          <button class="btn btn-danger" id="reject-btn" onclick="diriginte.rejectSolicitare()">
            Respinge
          </button>
          <button class="btn btn-success" id="approve-btn" onclick="diriginte.approveSolicitare()">
            Aprobă
          </button>
        </div>
      </div>
    </div>

    <!-- Modal pentru vizualizare imagine cu rotire -->
    <div class="modal-overlay" id="image-modal" style="display: none">
      <div class="modal-content image-modal">
        <div class="modal-header">
          <h3>Document Motivare</h3>
          <div class="image-controls">
            <button
              type="button"
              class="rotate-btn"
              onclick="diriginte.rotateModalImage(-90)"
              title="Rotește stânga"
            >
              ↺
            </button>
            <button
              type="button"
              class="rotate-btn"
              onclick="diriginte.rotateModalImage(90)"
              title="Rotește dreapta"
            >
              ↻
            </button>
            <button class="close-btn" onclick="diriginte.closeImageModal()">×</button>
          </div>
        </div>

        <div class="modal-body">
          <div class="modal-image-wrapper">
            <img id="modal-image" src="" alt="Document motivare" />
          </div>
        </div>
      </div>
    </div>

    <!-- Export Modal -->
    <div class="modal-overlay" id="export-modal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Export Script pentru Catalog</h3>
          <button class="close-btn" onclick="diriginte.closeExportModal()">×</button>
        </div>

        <div class="modal-body">
          <p>Copiază textul de mai jos și inserează-l în catalogul electronic:</p>
          <textarea id="export-text" readonly rows="10"></textarea>
          <button class="copy-btn" onclick="diriginte.copyExportText()">📋 Copiază</button>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" style="display: none">
      <div class="loading-spinner"></div>
      <p>Se procesează...</p>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/diriginte.js"></script>
  </body>
</html>
