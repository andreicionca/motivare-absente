<!DOCTYPE html>
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - MotivÄƒri È˜colare</title>
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="icon" type="image/png" href="/favicon.png" />
  </head>
  <body>
    <!-- Top Header -->
    <header class="top-header">
      <div class="user-info">
        <div class="avatar">
          <span id="user-avatar">ğŸ‘¤</span>
        </div>
        <div class="user-details">
          <h2 id="user-name">Nume Utilizator</h2>
          <p id="user-role">Elev â€¢ Clasa 10A</p>
        </div>
      </div>
      <button class="logout-btn" onclick="auth.logout()">IeÈ™ire</button>
    </header>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Main Content Container -->
    <main class="main-content">
      <!-- Pagina 1: Dashboard/Stats -->
      <section class="page-content active" id="page-stats">
        <div class="page-header">
          <h2>ğŸ“Š Statistici</h2>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card primary">
            <div class="stat-icon">â°</div>
            <div class="stat-info">
              <h3 id="ore-ramase">42</h3>
              <p>Ore personale rÄƒmase</p>
            </div>
          </div>

          <div class="stat-card success">
            <div class="stat-icon">âœ…</div>
            <div class="stat-info">
              <h3 id="absente-motivate">0</h3>
              <p>AbsenÈ›e motivate</p>
            </div>
          </div>

          <div class="stat-card warning">
            <div class="stat-icon">ğŸ“„</div>
            <div class="stat-info">
              <h3 id="total-motivari">0</h3>
              <p>Total motivÄƒri</p>
            </div>
          </div>

          <div class="stat-card info">
            <div class="stat-icon">â³</div>
            <div class="stat-info">
              <h3 id="in-asteptare">0</h3>
              <p>Ãn aÈ™teptare</p>
            </div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="recent-activity">
          <h3>Activitate RecentÄƒ</h3>
          <div class="activity-list" id="recent-activity">
            <!-- Se Ã®ncarcÄƒ dinamic -->
          </div>
        </div>
      </section>

      <!-- Pagina 2: ÃncarcÄƒ Motivare -->
      <section class="page-content" id="page-upload">
        <div class="page-header">
          <h2>ğŸ“¤ ÃncarcÄƒ Motivare</h2>
        </div>

        <!-- Tipuri MotivÄƒri -->
        <div class="motivare-types">
          <button class="type-card" onclick="selectMotivareType('medicala_clasica')">
            <div class="type-icon">ğŸ¥</div>
            <h3>Motivare medicalÄƒ</h3>
            <p>Pentru zilele de boalÄƒ</p>
          </button>

          <button
            class="type-card"
            onclick="selectMotivareType('invoire_lunga')"
            id="invoire-lunga-card"
          >
            <div class="type-icon">ğŸ“…</div>
            <h3>Ãnvoire de la pÄƒrinte</h3>
            <p>Pentru una sau mai multe zile de È™coalÄƒ</p>
          </button>

          <button class="type-card" onclick="selectMotivareType('alte_motive')">
            <div class="type-icon">ğŸ“‹</div>
            <h3>Alte motive</h3>
            <p>SituaÈ›ii speciale</p>
          </button>
        </div>

        <!-- Formular Motivare -->
        <form class="motivare-form" id="motivare-form" style="display: none">
          <input type="hidden" id="tip-motivare" name="tip_motivare" />

          <div class="form-group">
            <label>AtaÈ™eazÄƒ documentul</label>
            <div class="upload-area" id="upload-area">
              <div class="upload-placeholder">
                <span class="upload-icon">ğŸ“·</span>
                <p>FotografiazÄƒ sau alege din galerie</p>
              </div>
              <input type="file" id="file-input" accept="image/*" />
              <div class="upload-buttons">
                <button type="button" class="upload-btn" onclick="openCamera()">ğŸ“· CamerÄƒ</button>
                <button type="button" class="upload-btn" onclick="openGallery()">ğŸ–¼ï¸ Galerie</button>
              </div>
            </div>

            <!-- Image Preview Container -->
            <div class="image-preview-container" id="image-preview-container" style="display: none">
              <div class="image-preview-header">
                <span>Document ataÈ™at</span>
                <div class="image-controls">
                  <button
                    type="button"
                    class="rotate-btn"
                    onclick="rotateImage(-90)"
                    title="RoteÈ™te stÃ¢nga"
                  >
                    â†º
                  </button>
                  <button
                    type="button"
                    class="rotate-btn"
                    onclick="rotateImage(90)"
                    title="RoteÈ™te dreapta"
                  >
                    â†»
                  </button>
                  <button type="button" class="remove-image-btn" onclick="removeImage()">Ã—</button>
                </div>
              </div>
              <div class="image-preview-wrapper">
                <img id="preview-img" src="" alt="Preview document" />
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="perioada-inceput">Data Ã®nceput</label>
            <input type="date" id="perioada-inceput" name="perioada_inceput" required />
          </div>

          <div class="form-group" id="perioada-sfarsit-group">
            <label for="perioada-sfarsit">Data sfÃ¢rÈ™it</label>
            <input type="date" id="perioada-sfarsit" name="perioada_sfarsit" />
          </div>

          <div class="form-group">
            <label for="motiv">Motivul (opÈ›ional)</label>
            <textarea id="motiv" name="motiv" placeholder="Descrie motivul absenÈ›ei..."></textarea>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="resetForm()">AnuleazÄƒ</button>
            <button type="submit" class="btn btn-primary">Trimite Motivarea</button>
          </div>
        </form>
      </section>

      <!-- Pagina 3: Solicit Ãnvoire -->
      <section class="page-content" id="page-cereri">
        <div class="page-header">
          <h2>âš¡ Solicit Ã®nvoire de la È™coalÄƒ pentru cÃ¢teva ore</h2>
        </div>

        <!-- Tipuri Cereri -->
        <div class="cereri-types">
          <button class="type-card" onclick="selectCerereType('personal')">
            <div class="type-icon">ğŸ‘¤</div>
            <h3>Ãnvoire personalÄƒ</h3>
            <p>Se scade din limita de 42 ore/an</p>
          </button>

          <button class="type-card" onclick="selectCerereType('invoire_justificata')">
            <div class="type-icon">ğŸ“‹</div>
            <h3>Ãnvoire justificatÄƒ</h3>
            <p>Nu se scade din limita anualÄƒ</p>
          </button>
        </div>

        <!-- Formular Cerere -->
        <form class="cerere-form" id="cerere-form" style="display: none">
          <input type="hidden" id="tip-cerere" name="tip_cerere" />

          <div class="form-group">
            <label for="data-solicitata">Data solicitatÄƒ</label>
            <input type="date" id="data-solicitata" name="data_solicitata" required />
          </div>

          <div class="form-group">
            <label for="ora-inceput">Ora Ã®nceput</label>
            <input type="time" id="ora-inceput" name="ora_inceput" required />
          </div>

          <div class="form-group">
            <label for="ora-sfarsit">Ora sfÃ¢rÈ™it</label>
            <input type="time" id="ora-sfarsit" name="ora_sfarsit" required />
          </div>

          <div class="form-group">
            <label for="motiv-cerere">Motivul</label>
            <textarea
              id="motiv-cerere"
              name="motiv"
              placeholder="Descrie motivul invoirii..."
              required
            ></textarea>
          </div>

          <div class="cerere-info">
            <p id="cerere-info-text">Cererea va fi trimisÄƒ pÄƒrintelui pentru aprobare.</p>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="resetCerereForm()">
              AnuleazÄƒ
            </button>
            <button type="submit" class="btn btn-primary">Trimite Cererea</button>
          </div>
        </form>
      </section>

      <!-- Pagina 4: MotivÄƒrile Mele -->
      <section class="page-content" id="page-motivari">
        <div class="page-header">
          <h2>ğŸ“„ MotivÄƒrile Mele</h2>
          <button class="refresh-btn" onclick="loadMotivari()">ğŸ”„</button>
        </div>

        <!-- Filtre -->
        <div class="filters">
          <button class="filter-btn active" data-filter="toate">Toate</button>
          <button class="filter-btn" data-filter="in_asteptare">Ãn aÈ™teptare</button>
          <button class="filter-btn" data-filter="aprobata">Aprobate</button>
          <button class="filter-btn" data-filter="finalizata">Motivate</button>
          <button class="filter-btn" data-filter="respinsa">Respinse</button>
        </div>

        <!-- Lista MotivÄƒri -->
        <div class="motivari-list" id="motivari-list">
          <!-- Se Ã®ncarcÄƒ dinamic -->
          <div class="empty-state" id="motivari-empty">
            <div class="empty-icon">ğŸ“</div>
            <p>Nu ai motivÄƒri</p>
          </div>
        </div>
      </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item active" data-page="stats">
        <span class="nav-icon">ğŸ“Š</span>
        <span class="nav-label">Statistici</span>
      </button>

      <button class="nav-item" data-page="upload">
        <span class="nav-icon">ğŸ“¤</span>
        <span class="nav-label">ÃncarcÄƒ</span>
      </button>

      <button class="nav-item" data-page="cereri">
        <span class="nav-icon">âš¡</span>
        <span class="nav-label">Solicit</span>
      </button>

      <button class="nav-item" data-page="motivari">
        <span class="nav-icon">ğŸ“„</span>
        <span class="nav-label">MotivÄƒrile mele</span>
      </button>
    </nav>

    <!-- Scripts -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
  </body>
</html>
