<!DOCTYPE html>
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - MotivÄƒri È˜colare</title>
    <link rel="stylesheet" href="css/dashboard.css" />
  </head>
  <body>
    <!-- Top Header -->
    <header class="top-header">
      <div class="user-info">
        <div class="avatar">
          <span id="user-avatar">ğŸ‘¤</span>
        </div>
        <div class="user-details">
          <h2 id="user-name">Nume Utilizator</h2>
          <p id="user-role">Elev â€¢ Clasa 10A</p>
        </div>
      </div>
      <button class="logout-btn" onclick="auth.logout()">IeÈ™ire</button>
    </header>

    <!-- Main Content Container -->
    <main class="main-content">
      <!-- Pagina 1: Dashboard/Stats -->
      <section class="page-content active" id="page-stats">
        <div class="page-header">
          <h2>ğŸ“Š Statistici</h2>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card primary">
            <div class="stat-icon">â°</div>
            <div class="stat-info">
              <h3 id="ore-ramase">42</h3>
              <p>Ore personale rÄƒmase</p>
            </div>
          </div>

          <div class="stat-card success">
            <div class="stat-icon">âœ…</div>
            <div class="stat-info">
              <h3 id="absente-motivate">0</h3>
              <p>AbsenÈ›e motivate</p>
            </div>
          </div>

          <div class="stat-card warning">
            <div class="stat-icon">ğŸ“„</div>
            <div class="stat-info">
              <h3 id="total-motivari">0</h3>
              <p>Total motivÄƒri</p>
            </div>
          </div>

          <div class="stat-card info">
            <div class="stat-icon">â³</div>
            <div class="stat-info">
              <h3 id="in-asteptare">0</h3>
              <p>Ãn aÈ™teptare</p>
            </div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="recent-activity">
          <h3>Activitate RecentÄƒ</h3>
          <div class="activity-list" id="recent-activity">
            <!-- Se Ã®ncarcÄƒ dinamic -->
          </div>
        </div>
      </section>

      <!-- Pagina 2: ÃncarcÄƒ Motivare -->
      <section class="page-content" id="page-upload">
        <div class="page-header">
          <h2>ğŸ“¤ ÃncarcÄƒ Motivare</h2>
        </div>

        <!-- Tipuri MotivÄƒri -->
        <div class="motivare-types">
          <button class="type-card" onclick="selectMotivareType('medicala')">
            <div class="type-icon">ğŸ¥</div>
            <h3>Motivare MedicalÄƒ</h3>
            <p>Pentru zilele de boalÄƒ</p>
          </button>

          <button class="type-card" onclick="selectMotivareType('invoire_scurta')">
            <div class="type-icon">â±ï¸</div>
            <h3>Ãnvoire ScurtÄƒ</h3>
            <p>Pentru cÃ¢teva ore</p>
          </button>

          <button
            class="type-card"
            onclick="selectMotivareType('invoire_lunga')"
            id="invoire-lunga-card"
          >
            <div class="type-icon">ğŸ“…</div>
            <h3>Ãnvoire LungÄƒ</h3>
            <p>Pentru zile Ã®ntregi</p>
          </button>
        </div>

        <!-- Formular Motivare -->
        <form class="motivare-form" id="motivare-form" style="display: none">
          <input type="hidden" id="tip-motivare" name="tip_motivare" />

          <div class="form-group">
            <label for="perioada-inceput">Data Ã®nceput</label>
            <input type="date" id="perioada-inceput" name="perioada_inceput" required />
          </div>

          <div class="form-group" id="perioada-sfarsit-group">
            <label for="perioada-sfarsit">Data sfÃ¢rÈ™it</label>
            <input type="date" id="perioada-sfarsit" name="perioada_sfarsit" />
          </div>

          <div class="form-group" id="ore-group" style="display: none">
            <label for="ore-solicitare">Ore solicitate</label>
            <input type="number" id="ore-solicitare" name="ore_solicitare" min="1" max="6" />
          </div>

          <div class="form-group" id="subtip-group" style="display: none">
            <label>Tipul invoirii</label>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="subtip" value="invoire_scurta_personal" />
                <span>Personal (se scade din cele 42 ore)</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="subtip" value="invoire_scurta_medical" />
                <span>Medical (nu se scade)</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label for="motiv">Motivul (opÈ›ional)</label>
            <textarea id="motiv" name="motiv" placeholder="Descrie motivul absenÈ›ei..."></textarea>
          </div>

          <div class="form-group">
            <label>AtaÈ™eazÄƒ documentul</label>
            <div class="upload-area" id="upload-area">
              <div class="upload-placeholder">
                <span class="upload-icon">ğŸ“·</span>
                <p>FotografiazÄƒ sau alege din galerie</p>
              </div>
              <input type="file" id="file-input" accept="image/*" />
              <div class="upload-buttons">
                <button type="button" class="upload-btn" onclick="openCamera()">ğŸ“· CamerÄƒ</button>
                <button type="button" class="upload-btn" onclick="openGallery()">ğŸ–¼ï¸ Galerie</button>
              </div>
            </div>
            <div class="image-preview" id="image-preview" style="display: none">
              <img id="preview-img" src="" alt="Preview" />
              <button type="button" class="remove-btn" onclick="removeImage()">Ã—</button>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="resetForm()">AnuleazÄƒ</button>
            <button type="submit" class="btn btn-primary">Trimite Motivarea</button>
          </div>
        </form>
      </section>

      <!-- Pagina 3: MotivÄƒrile Mele -->
      <section class="page-content" id="page-motivari">
        <div class="page-header">
          <h2>ğŸ“„ MotivÄƒrile Mele</h2>
          <button class="refresh-btn" onclick="loadMotivari()">ğŸ”„</button>
        </div>

        <!-- Filtre -->
        <div class="filters">
          <button class="filter-btn active" data-filter="toate">Toate</button>
          <button class="filter-btn" data-filter="in_asteptare">Ãn verificare</button>
          <button class="filter-btn" data-filter="aprobata">Aprobate</button>
          <button class="filter-btn" data-filter="finalizata">Motivate</button>
          <button class="filter-btn" data-filter="respinsa">Respinse</button>
        </div>

        <!-- Lista MotivÄƒri -->
        <div class="motivari-list" id="motivari-list">
          <!-- Se Ã®ncarcÄƒ dinamic -->
          <div class="empty-state" id="motivari-empty">
            <div class="empty-icon">ğŸ“</div>
            <p>Nu ai motivÄƒri</p>
          </div>
        </div>
      </section>

      <!-- Pagina 4: Profil -->
      <section class="page-content" id="page-profil">
        <div class="page-header">
          <h2>ğŸ‘¤ Profilul Meu</h2>
        </div>

        <div class="profile-info">
          <div class="profile-card">
            <div class="profile-avatar">ğŸ‘¤</div>
            <h3 id="profile-name">Nume Prenume</h3>
            <p id="profile-details">Elev â€¢ Clasa 10A</p>
          </div>

          <div class="profile-stats">
            <div class="profile-stat">
              <span class="stat-label">An È™colar</span>
              <span class="stat-value">2024-2025</span>
            </div>
            <div class="profile-stat">
              <span class="stat-label">Ore folosite</span>
              <span class="stat-value" id="profile-ore-folosite">0/42</span>
            </div>
          </div>

          <div class="profile-actions">
            <button class="profile-btn" onclick="showChangePassword()">ğŸ”’ SchimbÄƒ parola</button>
            <button class="profile-btn danger" onclick="auth.logout()">ğŸšª IeÈ™ire din cont</button>
          </div>
        </div>
      </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item active" data-page="stats">
        <span class="nav-icon">ğŸ“Š</span>
        <span class="nav-label">Statistici</span>
      </button>

      <button class="nav-item" data-page="upload">
        <span class="nav-icon">ğŸ“¤</span>
        <span class="nav-label">ÃncarcÄƒ</span>
      </button>

      <button class="nav-item" data-page="motivari">
        <span class="nav-icon">ğŸ“„</span>
        <span class="nav-label">MotivÄƒrile mele</span>
      </button>

      <button class="nav-item" data-page="profil">
        <span class="nav-icon">ğŸ‘¤</span>
        <span class="nav-label">Profil</span>
      </button>
    </nav>

    <!-- Scripts -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
  </body>
</html>
